<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="renderer" content="webkit">
    <title>菜单管理</title>
    <meta name="keywords" content="bootstrap-treetable">
    <meta name="description" content="bootstrap-treetable">
    <link rel="stylesheet" type="text/css" th:href="@{/bootstrap/libs/v3/bootstrap.min.css}"/>
    <link rel="stylesheet" th:href="@{/bootstrap/bootstrap-treetable.css}"/>
</head>
<body>
<button type="button" class="btn btn-info">添加目录</button>
<table id="demo"></table>
<!-- 全局js -->
<script type="text/javascript" th:src="@{/bootstrap/libs/jquery.min.js}"></script>
<script type="text/javascript" th:src="@{/bootstrap/libs/v3/bootstrap.min.js}"></script>
<script type="text/javascript" th:src="@{/bootstrap/bootstrap-treetable.js}"></script>
<script type="text/javascript">
    var menuid = "";
    var treeTable = $('#demo').bootstrapTreeTable({
        toolbar: "#demo-toolbar",    //顶部工具条
        expandColumn: 1,          // 在哪一列上面显示展开按钮
        type: "GET",
        height: 500,
        expandFirst: false, //第一列是否展开
        url: "menuinfo/FindAllMenu",
        columns: [{
            checkbox: true
        },
            {
                title: '菜单名称',
                field: 'menuName',
                fixed: true,
                width: '200',
                formatter: function (value, row, index) {
                    if (row.icon == null || row == "") {
                        return row.menuName;
                    } else {
                        return '<i class="' + row.icon + '"></i> <span class="nav-label">' + row.menuName + '</span>';
                    }
                }
            },
            {
                field: 'id',
                title: '菜单ID',
                width: '300',
                align: "left",
                valign: "bottom",
                visible: true
            },
            {
                field: 'orderNum',
                title: '排序',
                width: '150',
                align: "left",
                valign: "bottom",
                visible: true
            },
            {
                field: 'url',
                title: '请求地址',
                width: '150',
                align: "left"
            },
            {
                title: '类型',
                field: 'menuType',
                width: '200',
                fixed: true,
                align: "center",
                valign: "top",
                formatter: function (value, item, index) {
                    if (item.menuType == '1') {
                        return '<span class="label label-success">目录</span>';
                    } else if (item.menuType == '2') {
                        return '<span class="label label-primary">菜单</span>';
                    } else if (item.menuType == '3') {
                        return '<span class="label label-warning">按钮</span>';
                    }
                }
            },
            {
                field: 'perms',
                title: '权限标识',
                width: '150',
                align: "center",
            },
            {
                title: '操作',
                width: '200',
                align: "center",
                formatter: function (value, row, index) {
                    var actions = [];
                    actions.push('<a class="btn btn-success btn-xs "  onclick="updatemenu()"><i class="fa fa-edit"></i>编辑</a> ');
                    actions.push('<a class="btn btn-info btn-xs "  onclick="addmenu()" href="#"><i class="fa fa-plus"></i>新增</a> ');
                    actions.push('<a class="btn btn-danger btn-xs "   onclick="deletemenu()"   href="#"><i class="fa fa-remove" ></i>删除</a>');
                    return actions.join('');
                }
            }],
        onAll: function (data) {
            console.log("onAll");
            return false;
        },
        onLoadSuccess: function (data) {
            console.log("onLoadSuccess");
            return false;
        },
        onLoadError: function (status) {
            console.log("onLoadError");
            return false;
        },
        onClickCell: function (field, value, row, $element) {
            console.log("onClickCell", row);
            menuid = row.id;
            return false;
        },
        onDblClickCell: function (field, value, row, $element) {
            console.log("onDblClickCell", row);
            return row;
        },
        onClickRow: function (row, $element) {
            console.log("onClickRow", row);
            return false;
        },
        onDblClickRow: function (row, $element) {
            console.log("onDblClickRow", row);
            return false;
        },
        data: null,
        ajaxParams: {}
    });

    //删除菜单
    function deletemenu() {
        alert(menuid);
    }

    //添加菜单
    function addmenu() {

    }

    //修改菜单
    function updatemenu() {

    }
</script>
</body>
</html>
